/*! project3 2016-05-04 */
function Game(a){this.update(a),this.data={}}function parse_json(a){try{var b=$.parseJSON(a)}catch(c){throw"JSON parse error: "+a}return b}function parse_json(a){try{var b=$.parseJSON(a)}catch(c){throw"JSON parse error: "+a}return b}Game.prototype.update=function(a){var b=this,c=$(a),d=document.getElementsByName("new-game")[0],e=document.getElementsByName("open-valve")[0];console.log(e),d&&(this.newGame(d),console.log(d)),$("form input[type=submit]").click(function(){$("form input[type=submit]").attr("clicked","false"),$(this).attr("clicked","true")}),c.submit(function(a){a.preventDefault();var c=$("input[type=submit][clicked=true]"),d=c.attr("name"),e=$("input[name=pipe]:checked").val();if("rotate"==d)g={rotate:"rotate",pipe:e};else if("insert"==d){var f=c.attr("value");g={insert:f,pipe:e}}else if("discard"==d)g={discard:"discard",pipe:e};else{var g={};g[d]=d,console.log(g)}b.ajax(g)})},Game.prototype.ajax=function(a){var b=this;$.ajax({url:"game-post.php",data:a,method:"POST",success:function(a){var c=JSON.parse(a);$("#grid").html(c.grid),$("#pipeOptions").html(c.pipeOptions),$("#error").html(c.error),$("#turnMessage").html(c.turnMessage),$("#win").html(c.winnerOptions),b.update()},error:function(a,b,c){console.log("Error")}})},Game.prototype.newGame=function(a){var b=this;$("form");a.onclick=function(a){a.preventDefault(),$.ajax({url:"game-post.php",data:{"new-game":"new-game"},method:"POST",success:function(a){var c=JSON.parse(a);$("#grid").html(c.grid),$("#pipeOptions").html(c.pipeOptions),$("#error").html(c.error),$("#turnMessage").html(c.turnMessage),$("#win").html(c.winnerOptions),b.update()},error:function(a,b,c){console.log("!!!!!")}}),location.replace("./")}};